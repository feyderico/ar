<!doctype html>
<html>
    <head>
        <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
        <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-detector.js"></script>
        <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-handler.js"></script>
    </head>
    <style>
        /*****LOADING*****/
        .loader-wrapper {
        width: 100%;
        height: 100%;
        position: fixed;
        top: 0;
        left: 0;
        background-color:black ;
        display: flex;
        justify-content: center;
        padding-top: 10%;
        align-items:initial;
        display: inline-block;
        text-align: center;
        }
        .loader {
        width: 300px;
        height: 300px;
        position: relative;
        }
        .loading-text{
        display: block;
        color: white;
        display: block;
        font-family: Helvetica, sans-serif;
        }
    </style>

    <body style="margin: 0; overflow: hidden; background-color: black;">

        <a-scene
            vr-mode-ui="enabled: false;"
            loading-screen="enabled: false;"
            renderer="logarithmicDepthBuffer: true;"
            arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 4x4;"
            id="scene"
            embedded
            gesture-detector
        >
            <a-assets id="assets" timeout = 60000>
                <a-asset-item
                    id="animated-asset-1"
                    src="https://ipfs.io/ipfs/QmeXkNN9EKCdy56zMKXELGopnX4QYmEH1wA1wqN9a7fo32/122.glb"
                ></a-asset-item>
                <a-asset-item
                    id="animated-asset-2"
                    src="https://ipfs.io/ipfs/QmeXkNN9EKCdy56zMKXELGopnX4QYmEH1wA1wqN9a7fo32/201.glb"
                ></a-asset-item>
                <a-asset-item
                    id="animated-asset-3"
                    src="https://ipfs.io/ipfs/QmeXkNN9EKCdy56zMKXELGopnX4QYmEH1wA1wqN9a7fo32/347.glb"
                ></a-asset-item>
                <a-asset-item
                    id="animated-asset-4"
                    src="https://ipfs.io/ipfs/QmeXkNN9EKCdy56zMKXELGopnX4QYmEH1wA1wqN9a7fo32/747.glb"
                ></a-asset-item>
            </a-assets>

            <a-marker
                id="animated-marker-1"
                type="barcode"
                value = "0"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
                id="markerA"
            >
                <a-entity
                    id="bowser-model"
                    scale="1 1 1"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset-1"
                    class="clickable"
                    gesture-handler
                ></a-entity>
            </a-marker>
            <a-marker
                id="animated-marker-2"
                type="barcode"
                value = "1"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
                id="markerA"
            >
                <a-entity
                    id="bowser-model"
                    scale="0.556667283150243 0.556667283150243 0.556667283150243"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset-2"
                    class="clickable"
                    gesture-handler
                ></a-entity>
            </a-marker>
            <a-marker
                id="animated-marker-3"
                type="barcode"
                value = "2"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
                id="markerA"
            >
            <a-entity
                id="bowser-model"
                scale="0.556667283150243 0.556667283150243 0.556667283150243"
                animation-mixer="loop: repeat"
                gltf-model="#animated-asset-3"
                class="clickable"
                gesture-handler
            ></a-entity>
            </a-marker>
            <a-marker
                id="animated-marker-4"
                type="barcode"
                value = "3"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
                id="markerA"
        >
            <a-entity
                id="bowser-model"
                scale="0.556667283150243 0.556667283150243 0.556667283150243"
                animation-mixer="loop: repeat"
                gltf-model="#animated-asset-4"
                class="clickable"
                gesture-handler
            ></a-entity>
            </a-marker>

            <a-entity camera></a-entity>
        </a-scene>
         <!--*************** LOADING WEBSITE **********-->
        <div class="loader-wrapper">
            <span class="loader">
            <img src="images/logo.png" autoplay loop muted width="300" height="300">
            </span>
            <h4 class="loading-text">AR Hyper-Spaces (Beta) loading... <p id="loadTime" class="loading-text" >0</p></h4>
      </div>
      <script src="js/jquery.js"></script>
       <!-- Display the countdown timer in an element -->
       <script>

        const sleep = (milliseconds) => {
            return new Promise(resolve => setTimeout(resolve, milliseconds))
        }
        // Set the date we're counting down to
        var start = new Date().getTime();
  
        // Update the count down every 1 second
        var x = setInterval(function() {

            var now = new Date().getTime();

            // Find the distance between now and the count down date
            var distance = now - start;

            // Time calculations for days, hours, minutes and seconds
            var seconds = Math.floor((distance % (1000 * 60)) / 1000);
            document.getElementById("loadTime").innerHTML = String(seconds);

            // If the count down is finished, write some text
            }, 1000);

          document.getElementById('assets').addEventListener('loaded', function() { 
              sleep(3000);
              clearInterval(x);
              $(".loader-wrapper").fadeOut("slow");
             })
      </script>
    </body>
</html>
